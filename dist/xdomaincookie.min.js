/*! xdomaincookie - v0.0.11 - 2020-04-02
* Copyright (c) 2020 ; Licensed  */
var xDomainCookie=void 0===xDomainCookie?{}:xDomainCookie;xDomainCookie.consumer={},xDomainCookie.consumer.iframes=[],xDomainCookie.consumer.messages={},xDomainCookie.consumer.init=function(a,b,c){var d=[];"[object Array]"===Object.prototype.toString.call(a)&&(d=a),"[object String]"===Object.prototype.toString.call(a)&&(d=[a]);var e=function(){for(var a in d){var e="xDomainCookieIframe_"+a;xDomainCookie.consumer.iframes.push(e);var f=document.createElement("iframe");f.id=e,!0===c?(f.style.display="block",f.style.width="100%",f.style.height="300px"):f.style.display="none",f.src=d[a],document.body.appendChild(f)}b&&b()};window.attachEvent?window.attachEvent("onload",e):window.addEventListener?window.addEventListener("load",e,!1):document.addEventListener("load",e,!1)},xDomainCookie.consumer.receiver=function(a,b){var c=window.addEventListener?"addEventListener":"attachEvent",d=window[c],e="attachEvent"===c?"onmessage":"message",f=document.location.hostname.split("."),g="";g=f.length>1?"."+f[f.length-2]+"."+f[f.length-1]:f[0],d(e,function(c){if(!0===b&&console.log(c),"object"==typeof c.data&&"xDomainCookie"===c.data.type){var d=document.createElement("a");d.href=c.origin;var e=d.hostname.split("."),f="."+e[e.length-2]+"."+e[e.length-1];if(xDomainCookie.consumer.messages.hasOwnProperty(c.data.messageId)&&(xDomainCookie.consumer.messages[c.data.messageId].messagesRecieved=xDomainCookie.consumer.messages[c.data.messageId].messagesRecieved+1,f===g&&(xDomainCookie.consumer.messages[c.data.messageId].e=c),xDomainCookie.consumer.messages[c.data.messageId].messagesRecieved===xDomainCookie.consumer.iframes.length)){var h=c;null!==xDomainCookie.consumer.messages[c.data.messageId].e&&(h=xDomainCookie.consumer.messages[c.data.messageId].e),delete xDomainCookie.consumer.messages[c.data.messageId],a(h)}}})},xDomainCookie.consumer.create=function(a,b,c){var d=Math.random(),e={type:"xDomainCookie",messageId:d,action:"create",data:{key:a,value:b,expiration:c}};return xDomainCookie.consumer.sendMessageToHost(e),d},xDomainCookie.consumer.destroy=function(a){var b=Math.random(),c={type:"xDomainCookie",messageId:b,action:"destroy",data:{key:a}};return xDomainCookie.consumer.sendMessageToHost(c),b},xDomainCookie.consumer.retrieve=function(a){var b=Math.random(),c={type:"xDomainCookie",messageId:b,action:"retrieve",data:{key:a}};return xDomainCookie.consumer.sendMessageToHost(c),b},xDomainCookie.consumer.sendMessageToHost=function(a){xDomainCookie.consumer.messages[a.messageId]={message:a,messagesRecieved:0,e:null};for(var b in xDomainCookie.consumer.iframes){document.getElementById(xDomainCookie.consumer.iframes[b]).contentWindow.postMessage(a,"*")}};var xDomainCookie=void 0===xDomainCookie?{}:xDomainCookie;xDomainCookie.host={},xDomainCookie.host.create=function(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e=document.location.hostname.split("."),f="",g=a+"="+b+";",h="expires="+d.toUTCString()+";";f=e.length>1?"domain=."+e[e.length-2]+"."+e[e.length-1]+";":"domain="+e[0]+";",document.cookie=g+h+f+"path=/;SameSite=None;Secure;"},xDomainCookie.host.destroy=function(a){var b=document.location.hostname.split("."),c="";c=b.length>1?"."+b[b.length-2]+"."+b[b.length-1]:b[0],document.cookie=a+"=; domain="+c+";path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;SameSite=None;Secure;"},xDomainCookie.host.retrieve=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return""},xDomainCookie.host.sendCookieToConsumer=function(a,b,c,d){var e=xDomainCookie.host.retrieve(a),f={type:"xDomainCookie",messageId:d,status:c,action:b,cookie:e};xDomainCookie.host.sendMessageToConsumer(f)},xDomainCookie.host.sendMessageToConsumer=function(a){parent.postMessage(a,"*")},xDomainCookie.host.init=function(a){var b=window.addEventListener?"addEventListener":"attachEvent";(0,window[b])("attachEvent"===b?"onmessage":"message",function(b){if("object"==typeof b.data&&"xDomainCookie"===b.data.type){if(b.data&&b.data.data&&b.data.data)switch(b.data.action){case"destroy":xDomainCookie.host.destroy(b.data.data.key),xDomainCookie.host.sendCookieToConsumer(b.data.data.key,"destroy",!0,b.data.messageId);break;case"retrieve":xDomainCookie.host.retrieve(b.data.data.key),xDomainCookie.host.sendCookieToConsumer(b.data.data.key,"retrieve",!0,b.data.messageId);break;case"create":xDomainCookie.host.create(b.data.data.key,b.data.data.value,b.data.data.expiration),xDomainCookie.host.sendCookieToConsumer(b.data.data.key,"create",!0,b.data.messageId)}a&&a(b)}})},window.xDomainCookie=xDomainCookie;
